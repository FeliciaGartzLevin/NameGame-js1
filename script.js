// I vÃ¤rsta fall om allt skiter sig sÃ¥ fÃ¥r jag gÃ¶ra en 
// HTML-lista med valda bilder dÃ¤r det finns 4 radiobtns 
// som val pÃ¥ varje och en submit-knapp lÃ¤ngst ner som 
// rÃ¤knar ihop poÃ¤ngen sen
//typ se Ninja Quiz

// FIXA âœ…
// nÃ¤r jag klickar pÃ¥ start-buttons (addeventlistener)
// sÃ¥ vill jag dÃ¶lja elementet start-game-btn-container 
// och visa image + answers+quit-buttons setAttribute('display=none/block')

// query the guess-buttons
const guessAllBtn = document.querySelector('#btn-guess-all');
const guessTenBtn = document.querySelector('#btn-guess-ten');
const guessTwentyBtn = document.querySelector('#btn-guess-twenty');
const startGameContainer = document.querySelector('#start-game-container');
const studentImage = document.querySelector('#student-image');
const answBtns = document.querySelectorAll('.answer-btns');
const quitBtn = document.querySelector('#quit-btn');
const answ1Btn = document.querySelector('#answ1');
const answ2Btn = document.querySelector('#answ2');
const answ3Btn = document.querySelector('#answ3');
const answ4Btn = document.querySelector('#answ4');
const answContainer = document.querySelector('.answers-container');

const showAnswBtnsWhenStart = () => {
    //gÃ¶r en funktion hÃ¤r som jag kan kalla pÃ¥ fÃ¶r varje startklick (all, 10,20 val)
    startGameContainer.style = 'display: none';
    studentImage.style = 'display: block';
    answBtns.style = 'display: block';
    answBtns.forEach( answBtn => {
       return answBtn.style = 'display: block';
    }); //funkar ej Ã¤nnu
    quitBtn.style = 'display: flex';
}

const shuffleArray = (array) => {
	for (let i = array.length - 1; i > 0; i--) {
		const j = Math.floor(Math.random() * (i + 1));
		const temp = array[i];
		array[i] = array[j];
		array[j] = temp;
	}
}

//cloning the students array into a new array
let allStudents = [...students];

shuffleArray(allStudents);

let chosenStudents;
let gameOn = false;
const answBtnArray = [answ1Btn, answ2Btn, answ3Btn, answ4Btn];

// console.log(allStudents);

// kanske en while som omsluter all nedan kod som i guess the number 
// dÃ¤r man gÃ¶r booleans fÃ¶r att avsluta och starta spel? 
// DÃ¥ leder quit button till "startsidan" med att vÃ¤lja antal gissningar igen
//nÃ¥gonting sÃ¥nthÃ¤r?:
/* const gameOn=true;
quitBtn.addEventListener('click', () => {
    gameOn=false;
}); */

//-------CLICK BUTTONS IN THE BEGINNING AND CHOOSE HOW MANY STUDENTS TO GUESS ON------

// MÃ¥ste loopa Ã¶ver denna enligt vald mÃ¤ngd gissningar
// pÃ¥ ngÃ¥got sÃ¤tt, men vill ju inte fÃ¥ hela loopen pÃ¥ samma 
// gÃ¥ng utan klicka och vÃ¤lja emellan
const setUpNewGuess = () => {
    //Setting the first chosen image and starting game
    studentImage.setAttribute('src', chosenStudents[0].image);

    shuffleArray(answBtnArray);
    //randomizing right answer button
    answBtnArray[0].innerHTML = `${chosenStudents[0].name}`;
    answBtnArray[1].innerHTML = `${allStudents[1].name}`;
    answBtnArray[2].innerHTML = `${allStudents[2].name}`;
    answBtnArray[3].innerHTML = `${allStudents[3].name}`;
    //kan det skrivas sÃ¥hÃ¤r istÃ¤llet?
    
// chosenStudents.map(student=> student.name); 
// skickar ut namnen i en array

}

let rightGuesses = 0;
let totalGuesses = 0;

// ngt sÃ¥nt hÃ¤r?: 
const gameOnFunc = () => {
    gameOn = true;
    //Setting the first chosen image and starting game
    setUpNewGuess();
    //hide startGameContainer and show studentImage + all game buttons
    showAnswBtnsWhenStart();

    while(gameOn && totalGuesses <= chosenStudents.length){ //denna while vill jag ju loopa tills chosenStudents tar slut. ska det gÃ¶ras med en for-loop istÃ¤llet? forEach?
        answContainer.addEventListener('click', (e) => {

            if(e.target.innerHTML = chosenStudents[0].name) { //
                console.log("You clicked the right name")
                chosenStudents ++;
                rightGuesses ++;
                totalGuesses ++; //behÃ¶ver ej egentligen rÃ¤kna dessa utan bara ta 
                                //     chosenStudents.length fÃ¶r att veta hur mÃ¥nga gissningar 
                                //     det blir, men vet ej hur jag ska fÃ¥ chosenStudents utanfÃ¶r scopet
                // skriv ut pÃ¥ nÃ¥got sÃ¤tt att det Ã¤r rÃ¤tt svar:
                // kan kanske bara skriva i ett htmlEl under bilden 
                // sÃ¥ det inte blir bÃ¶kigt
                // // timer. fixa med denna nÃ¤r spelet funkar nÃ¥golunda
                    // setTimeout(() => {
                //     // gÃ¶r knappen grÃ¶n i 2 sek och ta bort de andra namnen
                //          answBtn[rÃ¤tt].classList.add(gÃ¶r css-style grÃ¶n fÃ¤rg);
                //          answBtn[alla som Ã¤r fel].style('display', 'hidden');
                // }, 2000);
                setUpNewGuess();

            } else if(e.target.innerHTML = !chosenStudents[0].name){
                console.log("Clicked wrong name")
                totalGuesses ++;
                chosenStudents ++;
                // visa pÃ¥ ngt sÃ¤tt att det var fel och skriv ut rÃ¤tt svar 
                // rÃ¤tt svar:
                // setTimeout(() => {


                //     //visar valt svar som en rÃ¶d knapp i 2 sek
                //     answBtn[felVal].classList.add(gÃ¶r en css-style med rÃ¶d fÃ¤rg);               
                    //            // timer
                    //            setTimeout(() => {
                //                 //visar rÃ¤tt svar som en grÃ¶n knapp i 4 sek samtidigt som de andra knapparna fÃ¶rsvinner
                //                 answBtn[rÃ¤ttVal].classList.add(css-style med grÃ¶n fÃ¤rg);
                //                 answBtn[felVal].style('display', 'hidden');
                //                     answBtn[alla som Ã¤r fel].style('display', 'block')
                //            }, 2000);
                // }, 2000);


                setUpNewGuess();

            } else if(e.target.innerHTML = `Quit Game ðŸ˜¾`){
                console.log("Y U quit game?")
                rightGuesses = 0;
                totalGuesses = 0;
                gameOn = false;
                clickToChooseAmountOfStudents();
            }
        }); 
    }
}

//choose between ALL, 10 or 20 guesses
const clickToChooseAmountOfStudents = () => {

    guessAllBtn.addEventListener('click', () => {
        //vÃ¤lj ALLA studenter âœ… och starta spel
        chosenStudents = allStudents; 
        
        //  //Setting the first chosen image and starting game
        //  setUpNewGuess();

        //hide startGameContainer and show studentImage + all game buttons âœ…
        // showAnswBtnsWhenStart();
        console.log('"All" is clicked');

        // gameOn = true;
        gameOnFunc();

        // fÃ¥r ev fortsÃ¤tta hela spelet 
        // hÃ¤r inne i respektive scope? 
        // Kan ta funktioner frÃ¥n utsidan 
        // och sÃ¤tta in fÃ¶r att kunna anvÃ¤nda 
        // chosenStudents nya vÃ¤rde.
        
    });
    guessTenBtn.addEventListener('click', () => {
        //slumpa 10 studenter och starta spel
            // slumpa med Fisher-Yates âœ…
        chosenStudents = allStudents.slice(0,10); //slumpa ut 10 stycken and slice()? out the 10 first? eller borde finnas en annan metod .filter[0-9]? + .map(student.name) fÃ¶r att fÃ¥ ut namnen 

        //Setting the first chosen image and answBtns
        // setUpNewGuess();

        //hide startGameContainer and show studentImage + all game buttons
        // showAnswBtnsWhenStart();
        console.log('"10" is clicked');

        // gameOn = true;
        gameOnFunc();
    });
    guessTwentyBtn.addEventListener('click', () => {
    //slumpa 20 bilder och starta spel
        // slumpa med Fisher-Yates
        chosenStudents = allStudents.slice(0,20); //slumpa ut 10 stycken
            
        //Setting the first chosen image and starting game
        // setUpNewGuess();
        //hide startGameContainer and show studentImage + all game buttons
        showAnswBtnsWhenStart();
        console.log('"20" is clicked');

        // gameOn = true;
        gameOnFunc();
    });
}

clickToChooseAmountOfStudents();
gameOnFunc();

// console.log(chosenStudents);

//-------END OF CLICKING BUTTONS IN THE BEGINNING AND CHOOSE HOW MANY STUDENTS TO GUESS ON------




// hur kan jag fÃ¥ med det valda vÃ¤rdet ovan ut ur scopet i 
// variabeln chosenStudents och anvÃ¤nda det? 
// tror jag har det nu iom funktionen. FÃ¶r i konsolen
// sÃ¥ ser jag mitt valda vÃ¤rde nÃ¤r jag skriver in chosenStudents
// console.log(chosenStudents); // hinner ej klicka pÃ¥ knapparna 
// innan denna skrivs ut i konsolen som undefined



//FIXA âœ…
// Slumpa fram namn pÃ¥ slumpade positioner samt bild 
// (typ slumpa tal 1-4 fÃ¶r position fÃ¶r det rÃ¤tta namnet?)
//slumpa fel namn frÃ¥n students och inte chosenStudents



// en if-sats fÃ¶r if I click the right answer etc
// hur ska jag gÃ¶ra fÃ¶r att kÃ¤nna av rÃ¤tt click?
// if( answBtnArray[0]=== chosenStudents[0].name)



  
 
// nÃ¤sta steg nu Ã¤r att lÃ¤nka clicked 
// answBtn till rÃ¤tt pÃ¥fÃ¶ljd i if-satsen

// hur kan en if-sats kÃ¤nna av ett click?
// hur registrera rÃ¤tt svar? ðŸ‘‡

/* 
sÃ¥hÃ¤r sÃ¥klart! ðŸ’¡ (nedan kod):
lÃ¤gg ett click-eventlistener pÃ¥ answers-container.
kolla var e.target Ã¤r och fÃ¥ in ovan if-sats.
Kan ju dÃ¥ inte anvÃ¤nda tagname==="BUTTON" eftersom
jag vill fÃ¥ ut specifik button, sÃ¥ kanske man kan 
ha e.target.id eller dyl?
anvÃ¤nd stopPropagation(); hÃ¤r ocksÃ¥? kolla detta i shauns popup 
som johan hjÃ¤lpte mig med
*/
// SE TODOS + SHAUNS POPUP 
// answContainer.addEventListener('click', (e) => {
// 	// console.log("You clicked on either the whole div, or on a button", e.target);

// 	// check if user clicked on a LI element
// 	if (e.target.tagName === "BUTTON") {
// 		// console.log("YAY you clicked on a todo (LI)", e.target);
// 		// console.log("The clicked todo's title is:", e.target.innerText);

// 		// get the `data-todo-id` attribute from the LI element
// 		const clickedTodoId = e.target.dataset.todoId;     // `data-todo-id`
// 		// console.log("You clicked on the listitem for todo with id:", clickedTodoId);

// 		// search todos for the todo with the id todoId
// 		const clickedTodo = todos.find( (todo) => {
// 			return todo.id == clickedTodoId;
// 		} );
// 		console.log("found clicked todo", clickedTodo);
// 	}
// }); 



// Hur kan jag fÃ¥ spelet att kÃ¶ra 
// om och om igen igenom valt antal elever?
// nÃ¥got med while(gameOn && totalGuesses <= chosenStudents.length)
// kanske? (se while-loopen ovan)

//how to write total score: `you've got ${rightGuesses}/${totalGuesses} right!`
// make an htmlEl to print this in